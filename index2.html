<!DOCTYPE html>
<html>
<head>
  <title>Click Map to Send Coordinates</title>
  <meta charset="utf-8">
  <style>
    #map { height: 90vh; width: 100%; }
    #result { padding: 10px; font-family: Arial; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="result">Click on the map to send coordinates to Python.</div>

  <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 13,
        center: { lat: 12.9716, lng: 77.5946 }, // Bengaluru
      });

      map.addListener("click", async function (e) {
        const lat = e.latLng.lat();
        const lng = e.latLng.lng();

        // Send to Flask
        const response = await fetch("http://localhost:5000/process-coordinates", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ lat, lng }),
        });

        const data = await response.json();
        document.getElementById("result").innerText = data.message;
      });
    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD0xpclQoMTs9FgXsyk1zvXYdiFfJb8YXM&callback=initMap">
  </script>
</body>
</html>
